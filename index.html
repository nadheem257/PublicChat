<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Animated Chat</title>

<style>
body {
  margin:0; padding:0;
  font-family: 'Inter', sans-serif;
  background: #05050a;
  color: white;
  overflow: hidden;
}

/* üåå Floating particles background */
#bg {
  position: fixed; inset:0;
  background: radial-gradient(circle at center,#1c1c30, #05050a);
  z-index:-1;
}
.particle {
  position:absolute;
  width:4px;height:4px;
  background:#00ffff55;
  border-radius:50%;
  animation: float 8s infinite ease-in-out;
}
@keyframes float {
  0%{transform:translateY(0) scale(.8);}
  50%{transform:translateY(-60px) scale(1.4);}
  100%{transform:translateY(0) scale(.8);}
}

/* LOGIN SCREEN */
#loginScreen {
  display:flex; flex-direction:column; 
  height:100vh; justify-content:center; align-items:center;
  animation:fadein .6s ease;
}
@keyframes fadein { from{opacity:0;transform:translateY(20px);} }

/* input */
#nameInput {
  background:#0c0c14; border:2px solid #26263a;
  padding:13px; width:300px; border-radius:10px; color:white;
  font-size:17px; text-align:center;
  transition:.25s;
}
#nameInput:focus {
  border-color:#00eaff;
  box-shadow:0 0 12px #00eaffaa;
}
#enterBtn {
  margin-top:15px; width:300px; padding:12px;
  background:#00eaff; border:none; 
  font-size:17px; cursor:pointer;
  border-radius:10px;
  transition:.2s;
}
#enterBtn:hover { transform:scale(1.05); background:#00fff7; }

/* CHAT */
#chatScreen {display:none; padding:20px;}
#messages {
  height:76vh; overflow-y:auto; padding:10px;
  border-radius:12px; border:1px solid #1b1b2d;
  background:rgba(7,10,18,.85);
  backdrop-filter: blur(14px);
  scroll-behavior:smooth;
}

/* bubbles */
.chat-row {display:flex; margin:10px 0; animation:msgEnter .3s ease;}
@keyframes msgEnter {
  from{opacity:0; transform:translateY(10px) scale(.95);}
}

.chat-bubble {
  padding:10px 14px; max-width:65%;
  border-radius:12px;
  font-size:15px; position:relative;
  animation:pop .12s ease;
}
@keyframes pop {from{transform:scale(.9);}}

/* Me */
.message-you {
  background:#3aff78;
  margin-left:auto;
  color:black;
  border-bottom-right-radius:4px;
}

/* Them */
.message-friend {
  background:#4da7ff;
  margin-right:auto;
  border-bottom-left-radius:4px;
}

/* meta */
.meta {
  font-size:12px; opacity:.8; margin-bottom:5px;
}

/* input area */
.input-area {
  display:flex; gap:8px; margin-top:12px; align-items:center;
}

#msg {
  flex:1; padding:11px; border:2px solid #26263a;
  background:#0b0b15; color:white; border-radius:10px;
  transition:.2s;
}
#msg:focus {
  border-color:#00eaff; box-shadow:0 0 10px #00eaff88;
}

.btn {
  width:45px; height:45px; border:none;
  background:#1a1a2c; font-size:22px; cursor:pointer;
  border-radius:12px;
  transition:.2s;
}
.btn:hover { transform:scale(1.12); background:#00eaff44; }

#sendBtn {
  padding:11px 16px;
  background:#00eaff; color:black;
  font-weight:700; border-radius:12px;
}
#sendBtn:hover { transform:scale(1.06); background:#00fff6; }

/* Emoji tray */
.emoji-picker {
  position:absolute; bottom:70px; left:10px;
  width:260px; background:#0d0d17;
  border:1px solid #22243b;
  border-radius:10px; padding:6px;
  display:none; flex-wrap:wrap; gap:6px;
  box-shadow:0 0 15px #00eaff55;
  animation:fade .15s ease;
}
@keyframes fade {from{opacity:0;transform:scale(.95);}}

/* emoji item */
.emoji {
  cursor:pointer; font-size:22px;
  transition:.1s;
}
.emoji:hover { transform:scale(1.2); }
</style>
</head>
<body>

<div id="bg"></div>

<div id="loginScreen">
  <input id="nameInput" placeholder="Enter your name">
  <button id="enterBtn">Enter Chat üöÄ</button>
</div>

<div id="chatScreen">
  <div id="messages"></div>
  <div class="input-area">
    <button class="btn" id="emojiBtn">üòä</button>
    <input id="msg" placeholder="Type...">
    <button id="sendBtn">‚û°Ô∏è</button>
  </div>
  <div class="emoji-picker" id="picker"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyCwSqm65CoNwPc3PiVo1T40YJM2MAcg480",
  authDomain:"server-1-9fa4f.firebaseapp.com",
  databaseURL:"https://server-1-9fa4f-default-rtdb.firebaseio.com",
  projectId:"server-1-9fa4f",
  storageBucket:"server-1-9fa4f.firebasestorage.app",
  messagingSenderId:"1019529146427",
  appId:"1:1019529146427:web:e22f6bbe1623b528f6ec1e"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const room="chat-room-1";

let myId="",username="";

const login=document.getElementById("loginScreen");
const chat=document.getElementById("chatScreen");
const enterBtn=document.getElementById("enterBtn");
const nameInput=document.getElementById("nameInput");
const msg=document.getElementById("msg");
const messages=document.getElementById("messages");
const sendBtn=document.getElementById("sendBtn");

enterBtn.onclick=()=>{
  username=nameInput.value.trim();
  if(!username) return alert("Enter name");
  myId=username+"-"+Math.random().toString(36).slice(2,7);
  login.style.display="none";
  chat.style.display="block";
};

function send(){
  if(!msg.value.trim())return;
  db.ref(room).push({
    text:msg.value, user:myId,name:username,time:Date.now()
  });
  msg.value="";
}
sendBtn.onclick=send;
msg.addEventListener("keypress",e=>e.key==="Enter"&&send());

db.ref(room).on("child_added",snap=>{
  const d=snap.val();
  const isMe=d.user===myId;
  const row=document.createElement("div");
  row.className="chat-row";
  const bubble=document.createElement("div");
  bubble.className="chat-bubble "+(isMe?"message-you":"message-friend");

  bubble.innerHTML=
    `<div class="meta"><b>${isMe?"You":d.name}</b> ${new Date(d.time).toLocaleTimeString([], {hour:"2-digit",minute:"2-digit"})}</div>`+
    d.text;
  row.appendChild(bubble);
  messages.appendChild(row);
  messages.scrollTop=messages.scrollHeight;
});

/* EMOJI PICKER */
const picker=document.getElementById("picker");
const emojiBtn=document.getElementById("emojiBtn");
const emojis="üòÄüòÉüòÑüòÅüòÜüòÖü§£üòÇüôÇüôÉüòâüòçüòòüòéü§©üò≠üò°üî•üëÄüíÄüò±ü§Øü§ùüôè‚ù§Ô∏èüíôüíõüíöüíú‚≠ê‚ú®‚ö°üíØ".split("");

emojis.forEach(e=>{
  const span=document.createElement("span");
  span.className="emoji"; span.textContent=e;
  span.onclick=()=>{msg.value+=e;picker.style.display="none";}
  picker.appendChild(span);
});
emojiBtn.onclick=()=>{
  picker.style.display = picker.style.display==="flex" ? "none" : "flex";
  picker.style.flexWrap="wrap";
};

/* PARTICLES */
for(let i=0;i<40;i++){
  let p=document.createElement("div");
  p.className="particle";
  p.style.left=Math.random()*100+"%";
  p.style.top=Math.random()*100+"%";
  p.style.animationDuration=(5+Math.random()*4)+"s";
  document.getElementById("bg").appendChild(p);
}
</script>
</body>
</html>
