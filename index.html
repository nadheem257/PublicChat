<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Animated Chat</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0; padding:0;
  font-family: 'Inter', sans-serif;
  background: #05050a;
  color: white;
  overflow:hidden;
}

/* Background */
#bg { position: fixed; inset:0; background: radial-gradient(circle at center,#1c1c30, #05050a); z-index:-1;}
.particle {
  position:absolute; width:4px;height:4px; background:#00ffff55; border-radius:50%;
  animation: float 8s infinite ease-in-out;
}
@keyframes float{0%{transform:translateY(0) scale(.8);}50%{transform:translateY(-60px) scale(1.4);}100%{transform:translateY(0) scale(.8);}}

/* Login screen */
#loginScreen {
  display:flex; flex-direction:column; height:100vh;
  justify-content:center; align-items:center;
  padding:20px;
}
#nameInput {
  background:#0c0c14; border:2px solid #26263a;
  padding:14px; width:90%; max-width:320px;
  border-radius:10px; color:white; font-size:17px; text-align:center;
}
#enterBtn {
  margin-top:15px; width:90%; max-width:320px;
  padding:14px; background:#00eaff; border:none;
  font-size:17px; border-radius:10px; cursor:pointer;
}

/* Chat UI */
#chatScreen {display:none; padding:10px; height:100vh; box-sizing:border-box;}
#messages {
  height:75vh; overflow-y:auto; padding:10px;
  border-radius:12px; border:1px solid #1b1b2d;
  background:rgba(7,10,18,.85); backdrop-filter: blur(14px);
}

/* Chat bubbles */
.chat-row {display:flex; margin:8px 0;}
.chat-bubble {padding:10px 14px; max-width:75%; border-radius:12px; font-size:15px;}
.message-you {background:#3aff78; margin-left:auto; color:black;}
.message-friend {background:#4da7ff; margin-right:auto;}
.meta {font-size:11px; opacity:.8; margin-bottom:4px;}

/* Input bar */
.input-area {
  display:flex; gap:6px; margin-top:6px;
  align-items:center; padding-bottom:6px;
}
#msg {
  flex:1; padding:12px; border:2px solid #26263a;
  background:#0b0b15; color:white; border-radius:10px;
  font-size:16px;
}
.btn {
  width:42px; height:42px; border:none; background:#1a1a2c;
  font-size:22px; border-radius:10px; cursor:pointer;
}
#sendBtn {
  padding:0 16px; background:#00eaff; color:black; font-weight:700;
  border-radius:10px;
}

/* Emoji picker ‚Äì mobile friendly */
#picker {
  position:fixed; bottom:70px; left:10px; right:10px;
  background:#0d0d17; border:1px solid #22243b;
  border-radius:10px; padding:6px; display:none;
  flex-wrap:wrap; gap:6px; max-height:160px; overflow-y:auto;
}
.emoji {cursor:pointer; font-size:22px; padding:6px;}

/* üì≤ Mobile adjustments */
@media (max-width:600px) {
  #messages {height:70vh;}
  .btn {width:40px; height:40px; font-size:20px;}
  #sendBtn {height:42px;}
  .chat-bubble {max-width:85%;}
}
</style>
</head>
<body>

<div id="bg"></div>

<!-- Login -->
<div id="loginScreen">
  <input id="nameInput" placeholder="Enter your name">
  <button id="enterBtn">Enter Chat üöÄ</button>
</div>

<!-- Chat -->
<div id="chatScreen">
  <div id="messages"></div>
  <div class="input-area">
    <button class="btn" id="emojiBtn">üòä</button>
    <input id="msg" placeholder="Type...">
    <button id="sendBtn">‚û°Ô∏è</button>
  </div>
  <div id="picker"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyCwSqm65CoNwPc3PiVo1T40YJM2MAcg480",
  authDomain:"server-1-9fa4f.firebaseapp.com",
  databaseURL:"https://server-1-9fa4f-default-rtdb.firebaseio.com",
  projectId:"server-1-9fa4f",
  storageBucket:"server-1-9fa4f.firebasestorage.app",
  messagingSenderId:"1019529146427",
  appId:"1:1019529146427:web:e22f6bbe1623b528f6ec1e"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();
const room="chat-room-1";

let myId="",username="";

enterBtn.onclick=()=>{
  username=nameInput.value.trim();
  if(!username) return alert("Enter your name");
  myId=username+"-"+Math.random().toString(36).slice(2,7);
  loginScreen.style.display="none";
  chatScreen.style.display="block";
};

function send(){
  if(!msg.value.trim())return;
  db.ref(room).push({text:msg.value, user:myId,name:username,time:Date.now()});
  msg.value="";
}
sendBtn.onclick=send;
msg.onkeypress=e=>e.key==="Enter"&&send();

db.ref(room).on("child_added",s=>{
  const d=s.val(), me=d.user===myId;
  const row=document.createElement("div"), b=document.createElement("div");
  row.className="chat-row";
  b.className="chat-bubble "+(me?"message-you":"message-friend");
  b.innerHTML=`<div class="meta"><b>${me?"You":d.name}</b> ${new Date(d.time).toLocaleTimeString([], {hour:"2-digit",minute:"2-digit"})}</div>`+d.text;
  row.appendChild(b); messages.appendChild(row);
  messages.scrollTop=messages.scrollHeight;
});

/* Emoji picker */
const picker=document.getElementById("picker");
const emojis="üòÄüòÉüòÑüòÅüòÜüòÖü§£üòÇüôÇüôÉüòâüòçüòòüòéü§©üò≠üò°üî•üëÄüíÄüò±ü§Øü§ùüôè‚ù§Ô∏èüíôüíõüíöüíú‚≠ê‚ú®‚ö°üíØ".split("");
emojis.forEach(e=>{
  const s=document.createElement("span"); s.className="emoji"; s.textContent=e;
  s.onclick=()=>{msg.value+=e;picker.style.display="none";}
  picker.appendChild(s);
});
emojiBtn.onclick=()=>picker.style.display=picker.style.display==="flex"?"none":"flex";

/* Particles */
for(let i=0;i<40;i++){
  let p=document.createElement("div"); p.className="particle";
  p.style.left=Math.random()*100+"%"; p.style.top=Math.random()*100+"%";
  p.style.animationDuration=(5+Math.random()*4)+"s"; bg.appendChild(p);
}
</script>
</body>
</html>
